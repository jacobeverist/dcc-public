import{r as h,g as Z,j as t,a as ee,s as te,b as se,D as ne,c as v,u as n,d as S,e as oe,f as ie,h as ae,i as N,k as re,P as ce,$ as le,l as de,R as ue,m as me,n as pe,o as he,N as ge,p as xe,q as je}from"./useExecutionLoop-5SDmjp-r.js";function we({variant:c="dropdown",showIcons:i=!1,className:a=""}){const[r,j]=h.useState(Z()),u=ee();h.useEffect(()=>{const s=x=>{j(x.detail.theme)};return window.addEventListener("themechange",s),()=>window.removeEventListener("themechange",s)},[]);const g=s=>{te(s),j(s)};return c==="dropdown"?t.jsx("div",{className:`theme-switcher theme-switcher-dropdown ${a}`,children:t.jsx("select",{id:"theme-select",value:r,onChange:s=>g(s.target.value),className:"theme-select",children:u.map(s=>t.jsx("option",{value:s.id,children:s.name},s.id))})}):c==="buttons"?t.jsxs("div",{className:`theme-switcher theme-switcher-buttons ${a}`,children:[t.jsx("label",{children:"Theme:"}),t.jsx("div",{className:"theme-button-group",children:u.map(s=>t.jsxs("button",{onClick:()=>g(s.id),className:`theme-button ${r===s.id?"active":""}`,title:s.description,style:{borderColor:r===s.id?s.primaryColor:void 0},children:[i&&t.jsx(y,{theme:s}),t.jsx("span",{children:s.name})]},s.id))})]}):t.jsx("div",{className:`theme-switcher theme-switcher-compact ${a}`,children:u.map(s=>t.jsx("button",{onClick:()=>g(s.id),className:`theme-icon-button ${r===s.id?"active":""}`,title:`${s.name}: ${s.description}`,style:{backgroundColor:r===s.id?s.primaryColor:void 0},children:t.jsx(y,{theme:s})},s.id))})}function y({theme:c}){const i={"cyber-dark":"âš¡","soft-light":"â˜€ï¸","ocean-deep":"ðŸŒŠ","sunset-warm":"ðŸŒ…","notebook-paper":"ðŸ“","minimal-gray":"â¬œ"};return t.jsx("span",{className:"theme-icon",children:i[c.id]})}const be=!1,fe=se(),Se=()=>{const c=ne,i={},a=Object.keys(v);Object.entries(c).forEach(([u,g])=>{const s=g.filter(x=>a.includes(x));s.length>0&&(i[u]=s)});const r=Object.values(i).flat();return a.filter(u=>!r.includes(u)).length>0,i},ye=Se();function ve({fitViewOptions:c}){const[i,a]=h.useState(""),r=n(e=>e.speed),j=n(e=>e.setSpeed),[u,g]=h.useState(!1),s=500,x=2,b=e=>{const o=e/100;return Math.round(Math.pow(o,x)*s)},C=e=>{const o=e/s;return Math.round(Math.pow(o,1/x)*100)},[D,k]=h.useState(C(r)),l=n(e=>e.isRunning),m=n(e=>e.wasmReady);n(e=>e.wasmStatus);const E=n(e=>e.networkStatus),T=n(e=>e.learningEnabled),R=n(e=>e.demoDescription),L=n(e=>e.start),w=n(e=>e.stop),O=n(e=>e.fullReset),$=n(e=>e.destroyNetwork),z=n(e=>e.setWasmNetwork),P=n(e=>e.setSpeed),A=n(e=>e.toggleLearning),I=n(e=>e.singleStep),M=n(e=>e.setCurrentDemo),H=S(e=>e.nodes),f=S(e=>e.reset),F=oe(e=>e.clearData),B=ie(e=>e.clearData),{initializeDemo:V}=ae(),{applyElkDefault:W}=N(),{fitView:_}=re(),q=async()=>{W(),await _(c)},G=e=>{const o=e.target.value;if(a(o),o){const d=fe[o]||"";M(o,d)}},K=async()=>{if(!(!i||!m))try{if(E!=="None"){console.log("[Header] Network already exists, destroying and recreating..."),l&&w(),$(),f(),F(),B(),await new Promise(d=>setTimeout(d,50));const o=await de();if(!o){console.error("[Header] Failed to create new network");return}z(o),console.log("[Header] New network created successfully")}const e=await V(i)}catch(e){console.error("[Header] Error during network initialization:",e)}},U=()=>{!m||!p||L()},X=()=>{!m||!p||l||I()},J=()=>{w()},Q=()=>{w(),O(),f(),a("")},Y=e=>{const o=parseInt(e.target.value);k(o);const d=b(o);j(d),P(d)},p=H.length>0;return t.jsxs("div",{id:"header",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--spacing-sm"},children:[t.jsx("div",{children:"Discrete Cortical Circuits (DCC) Simulator"}),t.jsx(ce,{})]}),t.jsxs("div",{id:"controls-bar",children:[t.jsxs("div",{className:"control-group",children:[t.jsx("label",{children:"Demos"}),t.jsx("button",{id:"init-btn",className:"primary",onClick:K,disabled:!i||!m||l,children:p?"â†º Load":"Load"}),t.jsx("button",{id:"reset-btn",className:"danger",onClick:Q,disabled:l,children:"Clear"}),t.jsxs("select",{id:"demo-select",value:i,onChange:G,disabled:l,children:[t.jsx("option",{value:"",children:"-- Select Demo --"}),Object.entries(ye).map(([e,o])=>t.jsx("optgroup",{label:e,children:o.map(d=>t.jsx("option",{value:d,children:v[d].name},d))},e))]}),t.jsx("div",{className:"status-item",children:t.jsx("span",{id:"demo-description",children:R})})]}),t.jsxs("div",{className:"control-group",children:[t.jsx("label",{children:"Controls"}),t.jsx("button",{id:"start-btn",className:"primary",onClick:U,disabled:!m||!p||l,children:"â–¶ Run"}),t.jsx("button",{id:"step-btn",className:"primary",onClick:X,disabled:!m||!p||l,title:"Execute single step",children:"â­ Step"}),t.jsx("button",{id:"stop-btn",className:"danger",onClick:J,disabled:!l,children:"â¹ Stop"}),t.jsx(le,{id:"learning-toggle",className:({isSelected:e})=>e?"primary":"danger",isSelected:T,onChange:A,isDisabled:!m||!p||l,children:({isSelected:e})=>e?"Learning On":"Learning Off"})]}),t.jsxs("div",{className:"control-group",children:[t.jsx("label",{children:"Speed"}),t.jsx("input",{type:"range",id:"speed-slider",min:"0",max:"100",value:D,onChange:Y,title:`${r}ms (quadratic scale)`,style:{direction:"rtl"}}),t.jsx("span",{id:"speed-display",style:{color:"var(--text-primary)"},children:r==0?"max speed":(1/(r/1e3)).toFixed(1)+" steps/s"})]}),t.jsxs("div",{className:"header-group",children:[t.jsx("label",{children:"Visuals"}),t.jsx(we,{variant:"dropdown"}),t.jsx("button",{id:"reset-layout-btn",className:"primary",onClick:q,disabled:!p||l,children:"Layout Nodes"})]})]})]})}function Ne(){const c=me({includeHiddenNodes:!0}),{applyElkDefault:i}=N();h.useEffect(()=>{c&&i()},[c]),pe(),he();const a={padding:.2};return t.jsxs("div",{id:"container",children:[t.jsx(ve,{fitViewOptions:a}),t.jsx("div",{id:"main-content",children:t.jsx(ge,{fitViewOptions:a})})]})}function Ce(){return t.jsx(ue,{children:t.jsx(Ne,{})})}xe();je.createRoot(document.getElementById("root")).render(t.jsx(h.StrictMode,{children:t.jsx(Ce,{})}));
